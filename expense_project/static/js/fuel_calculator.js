var IDs=1;origin_array=[],destination_array=[],distances=[];var fuel_rate,maintenance_factor,idling_factor,origin=null,destination=null,set_delete_row=null;function addtest(){document.getElementById("addbtn").disabled=!0,document.getElementById("dwnbtn").disabled=!0,document.getElementById("labbtn").disabled=!0,document.getElementById("done").disabled=!0;var e=document.getElementById("Tadd"),i=e.rows.length;2==i&&(document.getElementById("deleterow").type="number",document.getElementById("deleterow").setAttribute("min",1));var a=e.insertRow(i-1);document.getElementById("deleterow").setAttribute("max",i-1);var t=a.insertCell(0),l=a.insertCell(1),o=a.insertCell(2);a.insertCell(3);t.innerHTML=e.rows.length-2,e.rows.length<=3?l.innerHTML="<input name = 'Origin' id = 'Origin' type = 'text' list = 'Centres' required style = 'width:100%' onchange = 'set_initial_origin(this)'>":(origin=destination_array[e.rows.length-4],setorigin()),o.innerHTML="<input name = 'Destination' id = 'Destination' type = 'text' list = 'Centres' required style = 'width:100%' onchange = 'set_initial_destination(this)'>"}function downroute(){document.getElementById("addbtn").disabled=!0,document.getElementById("dwnbtn").disabled=!0,document.getElementById("done").disabled=!0;var e=document.getElementById("Tadd"),i=e.rows.length;2==i&&(document.getElementById("deleterow").type="number",document.getElementById("deleterow").setAttribute("min",1));var a=e.insertRow(i-1);document.getElementById("deleterow").setAttribute("max",i-1);var t=a.insertCell(0),l=a.insertCell(1),o=a.insertCell(2);a.insertCell(3);t.innerHTML=e.rows.length-2,l.innerHTML=destination_array[e.rows.length-4],origin=destination_array[e.rows.length-4],o.innerHTML=origin_array[e.rows.length-4],destination=origin_array[e.rows.length-4]}function tolab(){document.getElementById("addbtn").disabled=!0,document.getElementById("dwnbtn").disabled=!0,document.getElementById("done").disabled=!0;var e=document.getElementById("Tadd"),i=e.rows.length;2==i&&(document.getElementById("deleterow").type="number",document.getElementById("deleterow").setAttribute("min",1));var a=e.insertRow(i-1);document.getElementById("deleterow").setAttribute("max",i-1);var t=a.insertCell(0),l=a.insertCell(1),o=a.insertCell(2);a.insertCell(3);t.innerHTML=e.rows.length-2,l.innerHTML=destination_array[e.rows.length-4],origin=destination_array[e.rows.length-4],o.innerHTML="Biolight Laboratory",destination="Biolight Laboratory"}function set_initial_origin(e){origin=e.value,document.getElementById("set_origin").disabled=!1}function set_initial_destination(e){destination=e.value}function setorigin(){var e=document.getElementById("Tadd"),i=e.rows.length-2;origin_array[e.rows.length-3]=origin,e.rows[i].cells[1].innerHTML=`<input id = 'org${IDs}' name = 'origin'  type = 'text'  style = 'width:100%' readonly>`,document.getElementById(`org${IDs}`).setAttribute("value",origin),document.getElementById("set_origin").disabled=!0,document.getElementById("set_destination").disabled=!1}function setdestination(){var e=document.getElementById("Tadd"),i=e.rows.length-2;destination_array[e.rows.length-3]=destination,e.rows[i].cells[2].innerHTML=`<input id = 'dest${IDs}' name = 'destination'  type = 'text'  style = 'width:100%' readonly>`,document.getElementById(`dest${IDs}`).setAttribute("value",destination),document.getElementById("addbtn").disabled=!1,document.getElementById("dwnbtn").disabled=!1,document.getElementById("labbtn").disabled=!1,document.getElementById("set_destination").disabled=!0,IDs++,update(),Total()}function setDeleteRow(e){set_delete_row=e.value}function delete_row(){var e=document.getElementById("Tadd"),i=e.rows.length;2==i?(document.getElementById("deleterow").setAttribute("min",1),alert("No rows to delete, please add rows first!")):0==set_delete_row?slert("Please change row value to minimum 1"):(document.getElementById("Tadd").deleteRow(set_delete_row),origin_array.splice(set_delete_row-1,1),destination_array.splice(set_delete_row-1,1),distances.splice(set_delete_row-1,1),document.getElementById("delete").disabled=!0,update(),Total()),i=e.rows.length,document.getElementById("deleterow").setAttribute("max",i-2),document.getElementById("addbtn").disabled=!1}function update(){for(var e,i,a=document.getElementById("Tadd"),t=a.rows.length,l=0;l<t-2;l++){e=origin_array[l],i=destination_array[l],distances[l]="AnkleSaria"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"AnkleSaria"==i?3:"Biolight Laboratory"==e&&"Dr. Kulsoom"==i?8.7:"Dr. Kulsoom"==e&&"Biolight Laboratory"==i?10.7:"Biolight Laboratory"==e&&"Tahir Shamsi"==i||"Tahir Shamsi"==e&&"Biolight Laboratory"==i?8.7:"Biolight Laboratory"==e&&"Taj Medical Complex"==i?2.2:"Biolight Laboratory"==e&&"Al-Hayyat Medical Centre"==i||"Al-Hayyat Medical Centre"==e&&"Biolight Laboratory"==i?4:"Taj Medical Complex"==e&&"Biolight Laboratory"==i?3.6:"Biolight Laboratory"==e&&"Al-Hafiz Clinic"==i||"Al-Hafiz Clinic"==e&&"Biolight Laboratory"==i?2.2:"Biolight Laboratory"==e&&"Al-Shifa Clinic"==i?1.9:"Al-Shifa Clinic"==e&&"Biolight Laboratory"==i?2.4:"Biolight Laboratory"==e&&"Dr. Ejaz Clinic"==i||"Dr. Ejaz Clinic"==e&&"Biolight Laboratory"==i?8.2:"Biolight Laboratory"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Biolight Laboratory"==i?8.5:"Biolight Laboratory"==e&&"Get Well Clinic"==i||"Get Well Clinic"==e&&"Biolight Laboratory"==i?6.5:"Get Well Clinic"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Get Well Clinic"==i?4:"Biolight Laboratory"==e&&"JPMC"==i||"JPMC"==e&&"Biolight Laboratory"==i?5:"Biolight Laboratory"==e&&"The Laboratory"==i||"The Laboratory"==e&&"Biolight Laboratory"==i?3.5:"Biolight Laboratory"==e&&"Medicentre Hospital"==i||"Medicentre Hospital"==e&&"Biolight Laboratory"==i?2.3:"Biolight Laboratory"==e&&"Hashmani Hospital"==i?3.2:"Hashmani Hospital"==e&&"Biolight Laboratory"==i?2.5:"AnkleSaria"==e&&"Medicentre Hospital"==i||"Medicentre Hospital"==e&&"AnkleSaria"==i?3.9:"Taj Medical Complex"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"Taj Medical Complex"==i?1:"AnkleSaria"==e&&"Al-Hafiz Clinic"==i||"Al-Hafiz Clinic"==e&&"AnkleSaria"==i?3.4:"AnkleSaria"==e&&"JPMC"==i||"JPMC"==e&&"AnkleSaria"==i?3.5:"AnkleSaria"==e&&"The Laboratory"==i||"The Laboratory"==e&&"AnkleSaria"==i?1:"Hashmani Hospital"==e&&"Taj Medical Complex"==i||"Taj Medical Complex"==e&&"Hashmani Hospital"==i?.6:"AnkleSaria"==e&&"Dr. Kulsoom"==i||"Biolight Laboratory"==e&&"Rida Medical Centre"==i?5.7:"Biolight Laboratory"==e&&"Bismillah Hospital - Baloch Colony"==i?6.3:"Biolight Laboratory"==e&&"Urdu Bazaar"==i||"Urdu Bazaar"==e&&"Biolight Laboratory"==i?4.2:"Bismillah Hospital - Baloch Colony"==e&&"Biolight Laboratory"==i?6.3:"JPMC"==e&&"Bismillah Hospital - Korangi"==i?8.6:"Biolight Laboratory"==e&&"Dar-ul-Shifa"==i||"Dar-ul-Shifa"==e&&"Biolight Laboratory"==i?13:"Biolight Laboratory"==e&&"Ali Medical Clinic"==i||"Ali Medical Clinic"==e&&"Biolight Laboratory"==i?2.2:"Ali Medical Clinic"==e&&"Khan Clinic"==i||"Khan Clinic"==e&&"Ali Medical Clinic"==i?.5:"Khan Clinic"==e&&"Get Well Clinic"==i||"Get Well Clinic"==e&&"Khan Clinic"==i?8.9:"Ali Medical Clinic"==e&&"Get Well Clinic"==i||"Get Well Clinic"==e&&"Ali Medical Clinic"==i?8.5:"Rida Medical Centre"==e&&"Biolight Laboratory"==i?5.7:"Biolight Laboratory"==e&&"Maryam Market"==i||"Maryam Market"==e&&"Biolight Laboratory"==i?4.5:"Khan Clinic"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Khan Clinic"==i||"Khan Clinic"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"Khan Clinic"==i?2.2:"Biolight Laboratory"==e&&"Nawab Clinic"==i||"Nawab Clinic"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Maryam Medical Centre"==i||"Maryam Medical Centre"==e&&"Biolight Laboratory"==i?2.6:"Biolight Laboratory"==e&&"Tariq Clinic"==i||"Tariq Clinic"==e&&"Biolight Laboratory"==i?4:"Biolight Laboratory"==e&&"Husaini Collection Point - Nishter Park"==i||"Husaini Collection Point - Nishter Park"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Jilani Medical Centre"==i||"Jilani Medical Centre"==e&&"Biolight Laboratory"==i?1.6:"Jilani Medical Centre"==e&&"Nawab Clinic"==i||"Nawab Clinic"==e&&"Jilani Medical Centre"==i||"Jilani Medical Centre"==e&&"Al-Hafiz Clinic"==i||"Al-Hafiz Clinic"==e&&"Jilani Medical Centre"==i?1:"Husaini Collection Point - Nishter Park"==e&&"Al-Hafiz Clinic"==i||"Al-Hafiz Clinic"==e&&"Husaini Collection Point - Nishter Park"==i?2.1:"Husaini Collection Point - Nishter Park"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"Husaini Collection Point - Nishter Park"==i?1.6:"JPMC"==e&&"Dr. Ejaz Clinic"==i?4.1:"Dr. Ejaz Clinic"==e&&"JPMC"==i?4.4:"Dr. Ejaz Clinic"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Dr. Ejaz Clinic"==i?.3:"JPMC"==e&&"Mehran Medical Centre"==i?4.4:"Mehran Medical Centre"==e&&"JPMC"==i?4.7:"Dr. Ejaz Clinic"==e&&"Bismillah Hospital - Korangi"==i||"Bismillah Hospital - Korangi"==e&&"Dr. Ejaz Clinic"==i?5.2:"The Laboratory"==e&&"Bismillah Hospital - Baloch Colony"==i?9.9:"Bismillah Hospital - Baloch Colony"==e&&"The Laboratory"==i?8.5:"Mehran Medical Centre"==e&&"Bismillah Hospital - Korangi"==i||"Bismillah Hospital - Korangi"==e&&"Mehran Medical Centre"==i?5:"Biolight Laboratory"==e&&"Board Office"==i||"Board Office"==e&&"Biolight Laboratory"==i?7.7:"Biolight Laboratory"==e&&"LUHMS - Gulshan"==i||"LUHMS - Gulshan"==e&&"Biolight Laboratory"==i?7.5:"Biolight Laboratory"==e&&"LUHMS - Fatima Bai"==i?1.2:"LUHMS - Fatima Bai"==e&&"Biolight Laboratory"==i?1.5:"Biolight Laboratory"==e&&"Etemad Medical Centre"==i||"Etemad Medical Centre"==e&&"Biolight Laboratory"==i?1.4:"Biolight Laboratory"==e&&"7th Day Adventist Hospital"==i||"7th Day Adventist Hospital"==e&&"Biolight Laboratory"==i?2.8:"7th Day Adventist Hospital"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"7th Day Adventist Hospital"==i?1.5:"Biolight Laboratory"==e&&"Dr. Wazir Clinic"==i||"Dr. Wazir Clinic"==e&&"Biolight Laboratory"==i?7:"Biolight Laboratory"==e&&"Dua Clinic"==i?3.3:"Dua Clinic"==e&&"Biolight Laboratory"==i?4:"Bismillah Hospital - Baloch Colony"==e&&"Dua Clinic"==i?6.1:"Dua Clinic"==e&&"Bismillah Hospital - Baloch Colony"==i?5.8:"Bismillah Hospital - Baloch Colony"==e&&"Mehran Medical Centre"==i?6.2:"Mehran Medical Centre"==e&&"Bismillah Hospital - Baloch Colony"==i?5.8:"Bismillah Hospital - Baloch Colony"==e&&"JPMC"==i?6.5:"JPMC"==e&&"Bismillah Hospital - Baloch Colony"==i?7.5:"Al-Hafiz Clinic"==e&&"Nawab Clinic"==i||"Nawab Clinic"==e&&"Al-Hafiz Clinic"==i?.75:"Nawab Clinic"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"Nawab Clinic"==i?4.7:"Rida Medical Centre"==e&&"LUHMS"==i?4.1:"LUHMS"==e&&"Rida Medical Centre"==i?3.3:"Taj Medical Complex"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Taj Medical Complex"==i?7:"Mehran Medical Centre"==e&&"AnkleSaria"==i||"AnkleSaria"==e&&"Mehran Medical Centre"==i?9.2:"Dr. Ismat House (Pakola Masjid)"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Dr. Ismat House (Pakola Masjid)"==i?2:"Dr. Ismat House (Pakola Masjid)"==e&&"AnkleSaria"==i?1.8:"AnkleSaria"==e&&"Dr. Ismat House (Pakola Masjid)"==i?2.7:"Sir Syed Hospital"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Sir Syed Hospital"==i||"Biolight Laboratory"==e&&"Dr. Ismat House (Pakola Masjid)"==i?11:"Sir Syed Hospital"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Sir Syed Hospital"==i?1.5:"Kharadar General Hospital"==e&&"Biolight Laboratory"==i?8.1:"Biolight Laboratory"==e&&"Kharadar General Hospital"==i?7.4:"Biolight Laboratory"==e&&"Dr. Farrukh"==i||"Dr. Farrukh"==e&&"Biolight Laboratory"==i?4.5:"Kharadar General Hospital"==e&&"JPMC"==i?6.8:"JPMC"==e&&"Kharadar General Hospital"==i?7.5:"Sir Syed Hospital"==e&&"JPMC"==i?5.1:"JPMC"==e&&"Sir Syed Hospital"==i?5.3:"AnkleSaria"==e&&"Ali Medical Clinic"==i?2.9:"Ali Medical Clinic"==e&&"AnkleSaria"==i?1.6:"AnkleSaria"==e&&"Dr. Wazir Clinic"==i||"Dr. Wazir Clinic"==e&&"AnkleSaria"==i?4.5:"Ali Medical Clinic"==e&&"Dr. Wazir Clinic"==i||"Dr. Wazir Clinic"==e&&"Ali Medical Clinic"==i?5:"Dr. Wazir Clinic"==e&&"Mehran Medical Centre"==i?9.5:"Mehran Medical Centre"==e&&"Dr. Wazir Clinic"==i?7.7:"Dr. Ejaz Clinic"==e&&"Get Well Clinic"==i||"Get Well Clinic"==e&&"Dr. Ejaz Clinic"==i?3.5:"Get Well Clinic"==e&&"Sir Syed Hospital"==i?6.4:"Sir Syed Hospital"==e&&"Get Well Clinic"==i?5.2:"Life Care Hospital"==e&&"Dr. Ejaz Clinic"==i||"Dr. Ejaz Clinic"==e&&"Life Care Hospital"==i?.3:"Life Care Hospital"==e&&"Mehran Medical Centre"==i||"Mehran Medical Centre"==e&&"Life Care Hospital"==i?.6:"Life Care Hospital"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Life Care Hospital"==i?7.8:"Gilani Clinic (Dr. DK)"==e&&"Biolight Laboratory"==i||"Biolight Laboratory"==e&&"Gilani Clinic (Dr. DK)"==i?2.3:"Bismillah Hospital - Baloch Colony"==e&&"Get Well Clinic"==i||"Get Well Clinic"==e&&"Bismillah Hospital - Baloch Colony"==i?1.6:"Bismillah Hospital - Baloch Colony"==e&&"Dr. Ejaz Clinic"==i||"Dr. Ejaz Clinic"==e&&"Bismillah Hospital - Baloch Colony"==i?6.2:"Dr. Wazir Clinic"==e&&"Dr. Ejaz Clinic"==i?9.5:"Dr. Ejaz Clinic"==e&&"Dr. Wazir Clinic"==i?7.7:"Dr. Wazir Clinic"==e&&"JPMC"==i?4.5:"JPMC"==e&&"Dr. Wazir Clinic"==i?3.6:"Falahi Medical Centre"==e&&"Biolight Laboratory"==i?3:"Biolight Laboratory"==e&&"Falahi Medical Centre"==i?2.9:"Biolight Laboratory"==e&&"Habib Public School"==i||"Habib Public School"==e&&"Biolight Laboratory"==i?6.8:"Ali Medical Clinic"==e&&"Maryam Market"==i?2.7:"Maryam Market"==e&&"Ali Medical Clinic"==i?4:"Biolight Laboratory"==e&&"Godam Chowrangi - Brooks Chowrangi"==i||"Godam Chowrangi - Brooks Chowrangi"==e&&"Biolight Laboratory"==i?9.8:"Get Well Clinic"==e&&"Godam Chowrangi - Brooks Chowrangi"==i?4.6:"Godam Chowrangi - Brooks Chowrangi"==e&&"Get Well Clinic"==i?6.5:"Nawab Clinic"==e&&"Tariq Clinic"==i||"Tariq Clinic"==e&&"Nawab Clinic"==i||"Husaini Collection Point - Nishter Park"==e&&"The Laboratory"==i||"The Laboratory"==e&&"Husaini Collection Point - Nishter Park"==i?2.3:"Biolight Laboratory"==e&&"Naseem Medical Centre"==i||"Naseem Medical Centre"==e&&"Biolight Laboratory"==i?8.5:"Get Well Clinic"==e&&"Taj Medical Complex"==i?6.8:"Taj Medical Complex"==e&&"Get Well Clinic"==i?7.3:"Al-Hafiz Clinic"==e&&"Board Office"==i||"Board Office"==e&&"Al-Hafiz Clinic"==i?5.7:"Get Well Clinic"==e&&"Naseem Medical Centre"==i?5.3:"Naseem Medical Centre"==e&&"Get Well Clinic"==i?4:0,a.rows[l+1].cells[0].innerHTML=l+1;let t=distances[l];a.rows[l+1].cells[3].innerHTML=`<input type = 'number' name = 'distance' value = ${t}  style = 'width:100%' readonly>`}document.getElementById("done").disabled=!1}function Total(){var e=document.getElementById("Tadd");const i=e.querySelector("tbody").getElementsByTagName("tr");var a=e.rows.length;console.log(`table length: ${a}`);var t=0;for(let e=1;e<a-1;e++){const a=i[e].getElementsByTagName("td")[3].querySelector("input[type='number']");a&&!isNaN(a.valueAsNumber)&&(t+=a.valueAsNumber)}total_distance=parseFloat(t.toFixed(2)+" km"),console.log("Total distance"),e.rows[a-1].cells[1].innerHTML=`<input name = 'Total_Distance' id = 'Total_Distance' value = ${total_distance} type = 'text' style = 'width:100%' readonly>`,sessionStorage.setItem("Psum",t),document.getElementById("done").disabled=!1}function updatefuel(){var e=parseFloat(sessionStorage.getItem("Psum")).toFixed(2);sessionStorage.setItem("Total_distance",e);var i=e*(fuel_rate/45)*idling_factor;sessionStorage.setItem("calfuel",i.toFixed(2));var a=0;a=e*maintenance_factor,sessionStorage.setItem("incent",a.toFixed(2));var t=i+a;sessionStorage.setItem("TAP",Math.ceil(t)),i=i.toFixed(2),a=Math.ceil(a),t=t.toFixed(2),document.getElementById("fuelrate").innerHTML=`<input type = 'number' name = 'fuelrate' value = ${fuel_rate} style = 'width:100%'  readonly>`,document.getElementById("calfuel").innerHTML=`<input type = 'number' name = 'calfuel' value = ${i} style = 'width:100%'  readonly>`,document.getElementById("incent").innerHTML=`<input type = 'number' name = 'incentive' value = ${a} style = 'width:100%'  readonly>`,document.getElementById("TAP").innerHTML=`<input type = 'number' name = 'TAP' value = ${t} style = 'width:100%'  readonly>`}function enableGrcpt(){document.getElementById("addbtn").disabled=!0,document.getElementById("dwnbtn").disabled=!0,document.getElementById("labbtn").disabled=!0,document.getElementById("Grcpt").disabled=!1,document.getElementById("delete").disabled=!0,document.getElementById("deleterow").type="hidden"}fetch("/fuel-calculator/get-fuel").then((e=>e.json())).then((e=>{fuel_rate=e.rate,maintenance_factor=e.maintenance,idling_factor=e.idling,sessionStorage.setItem("fuel_rate",fuel_rate),console.log(`Fuel Rate: ${fuel_rate}`),console.log(`maintenance: ${maintenance_factor}`),console.log(`idling: ${idling_factor}`)}));